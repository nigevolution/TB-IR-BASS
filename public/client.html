<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>TB-BASS IR</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
body{margin:0;background:#000;color:#fff;font-family:Arial;text-align:center}
.logo{max-width:260px;margin:30px auto}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:25px;padding:40px}
.card{background:#111;border-radius:18px;padding:20px;box-shadow:0 0 30px #ff4500}
button{margin-top:15px;padding:14px 30px;background:#ff4500;border:none;border-radius:10px;color:#fff;font-weight:bold;cursor:pointer}
</style>
</head>

<body>

<img src="/logo.png" class="logo">
<h1>IMPORTAR IR</h1>

<div id="grid" class="grid"></div>

<script>
const SUPABASE_URL = "COLE_AQUI_SUA_SUPABASE_URL";
const SUPABASE_KEY = "COLE_AQUI_SUA_SUPABASE_PUBLIC_KEY";

const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

async function carregar() {
  const { data, error } = await supabase
    .from("ir_products")
    .select("*")
    .eq("active", true)
    .order("name");

  if (error) {
    alert("Erro ao carregar catÃ¡logo");
    return;
  }

  const grid = document.getElementById("grid");

  data.forEach(ir => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <h2>${ir.name}</h2>
      <p>R$ ${ir.price}</p>
      <button onclick="importar('${ir.ir_file}')">IMPORTAR NA M-EFFECTS</button>
    `;
    grid.appendChild(card);
  });
}

function importar(file) {
  window.location.href = "mfx://import?file=" + encodeURIComponent(file);
}

carregar();
</script>

</body>
</html>
